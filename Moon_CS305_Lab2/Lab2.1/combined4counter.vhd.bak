entity combined4counter is
  port (Clk, Reset, Enable : in bit;
        Mode : in bit_vector (1 downto 0);
        Q : out bit_vector (3 downto 0));
end entity combined4counter;

architecture behaviour1 of combined4counter is
begin
  process (Clk)
    variable v_Q: bit_vector (3 downto 0);
  begin
    
    if Clk'event and Clk = '1' then
      
      if Mode = "00" then
        
        if Enable = '0' then
          v_Q := v_Q;
        elsif Reset = '1' then
          v_Q := "1011";
        elsif v_Q > "0001" and v_Q <= "1011" then
          v_Q := v_Q - "0010";
        else
          v_Q := "1011";
        end if;
        
      elsif Mode = "01" then
        
        if Enable = '0' then
          v_Q := v_Q;
        elsif Reset = '1' then
          v_Q := "1010";
        elsif v_Q = "1010" then
          v_Q := "0101";
        elsif v_Q = "0101" then
          v_Q := "1000";
        elsif v_Q = "1000" then
          v_Q := "0011";
        elsif v_Q = "0011" then
          v_Q := "0111";
        elsif v_Q = "0111" then
          v_Q := "0110";
        elsif v_Q = "0110" then
          v_Q := "1100";
        else
          v_Q := "1010";
        end if;
      
      elsif Mode = "10" then
        
        if Enable = '0' then
          v_Q := v_Q;
        elsif Reset = '1' then
          v_Q := "0001";
        elsif v_Q < "1101" and v_Q >= "0001" then
          v_Q := v_Q + "0001";
        else
          v_Q := "0001";
        end if;
        
      elsif Mode = "11" then
        
        v_Q := "1111";
        
      end if;
      
    end if;
    
    Q <= v_Q;
    
  end process;
end architecture behaviour1;